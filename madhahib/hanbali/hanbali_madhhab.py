from ..base_madhhab import BaseMadhhab

class HanbaliMadhhab(BaseMadhhab):
    """المذهب الحنبلي - The Hanbali School of Islamic Jurisprudence"""
    
    def __init__(self):
        super().__init__()
        self.name = "Hanbali"
        self.arabic_name = "الحنبلي"
        self.founder = "الإمام أحمد بن حنبل"
        self.founding_period = "القرن التاسع الميلادي (164-241 هـ)"
        self.main_sources = [
            "القرآن الكريم",
            "السنة النبوية",
            "فتاوى الصحابة",
            "الإجماع",
            "القياس (عند الضرورة)",
            "المصالح المرسلة"
        ]
        self.methodology = "التمسك بالنصوص وتقليل الاجتهاد بالرأي"
        self.geographic_influence = [
            "السعودية",
            "قطر",
            "الإمارات",
            "الكويت",
            "بعض مناطق العراق والشام"
        ]
        self.famous_scholars = [
            "الإمام أحمد بن حنبل",
            "الإمام ابن قدامة المقدسي",
            "الإمام ابن تيمية",
            "الإمام ابن القيم",
            "الإمام المرداوي",
            "الإمام البهوتي",
            "الإمام ابن مفلح"
        ]
    
    def get_introduction(self):
        """مقدمة عن المذهب الحنبلي"""
        return f"""أنا المذهب {self.arabic_name}، مذهب أهل الحديث والأثر.
        
        تأسست على يد إمام أهل السنة {self.founder} في {self.founding_period}.
        
        أتميز بتمسكي الشديد بالنصوص الشرعية من القرآن والسنة، وأقلل من
        الاجتهاد بالرأي إلا عند الضرورة القصوى.
        
        أولي أهمية كبيرة لأقوال الصحابة وفتاواهم، وأعتبرها مصدراً مهماً
        في الاستنباط بعد الكتاب والسنة.
        
        أشتهر بالمحافظة على المنهج السلفي والتمسك بفهم السلف الصالح،
        وأنتشر بقوة في {', '.join(self.geographic_influence[:3])} ومنطقة الخليج."""
    
    def get_methodology(self):
        """منهجية المذهب الحنبلي"""
        return """منهجيتي في الاستنباط تقوم على الترتيب التالي:
        
        1. القرآن الكريم - المصدر الأول والأساسي
        2. السنة النبوية - مع قبول الحديث الضعيف في الفضائل
        3. فتاوى الصحابة - أقوال وآراء الصحابة رضي الله عنهم
        4. الإجماع - إجماع المسلمين المحقق
        5. القياس - عند الضرورة وبشروط صارمة
        6. المصالح المرسلة - في حدود ضيقة
        
        مبادئي الأساسية:
        - تقديم النقل على العقل
        - التمسك بظاهر النصوص
        - الحذر من التوسع في الاجتهاد
        - اتباع منهج السلف الصالح"""
    
    def get_famous_scholars(self):
        """علماء المذهب الحنبلي المشهورون"""
        return f"""من أبرز علمائي:
        
        • {self.famous_scholars[0]} - إمام أهل السنة ومؤسس المذهب
        • {self.famous_scholars[1]} - صاحب المغني في الفقه الحنبلي
        • {self.famous_scholars[2]} - شيخ الإسلام وأحد أعلام التجديد
        • {self.famous_scholars[3]} - تلميذ ابن تيمية وصاحب زاد المعاد
        • {self.famous_scholars[4]} - صاحب الإنصاف في معرفة الراجح
        • {self.famous_scholars[5]} - صاحب كشاف القناع
        • {self.famous_scholars[6]} - صاحب المبدع في شرح المقنع"""
    
    def build_prompt(self, question):
        """بناء التوجيه المخصص للمذهب الحنبلي"""
        base_prompt = super().build_prompt(question)
        
        hanbali_additions = f"""
        
        معلومات إضافية عن المذهب الحنبلي:
        - أتمسك بالنصوص وأقلل من الاجتهاد بالرأي
        - أولي أهمية كبيرة لأقوال وفتاوى الصحابة
        - أتبع المنهج السلفي في فهم النصوص
        - أحذر من التوسع في القياس والاستحسان
        
        تأكد من إبراز التمسك بالنصوص ومنهج السلف في إجابتك."""
        
        return base_prompt + hanbali_additions