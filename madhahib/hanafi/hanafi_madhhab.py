from ..base_madhhab import BaseMadhhab

class HanafiMadhhab(BaseMadhhab):
    """المذهب الحنفي - The Hanafi School of Islamic Jurisprudence"""
    
    def __init__(self):
        super().__init__()
        self.name = "Hanafi"
        self.arabic_name = "الحنفي"
        self.founder = "الإمام أبو حنيفة النعمان بن ثابت"
        self.founding_period = "القرن الثامن الميلادي (80-150 هـ)"
        self.main_sources = [
            "القرآن الكريم",
            "السنة النبوية", 
            "الإجماع",
            "القياس",
            "الاستحسان",
            "العرف"
        ]
        self.methodology = "التوسع في استخدام الرأي والقياس والاستحسان"
        self.geographic_influence = [
            "تركيا",
            "آسيا الوسطى", 
            "الهند",
            "باكستان",
            "بنغلاديش",
            "أفغانستان",
            "البلقان"
        ]
        self.famous_scholars = [
            "الإمام أبو حنيفة النعمان",
            "الإمام أبو يوسف",
            "الإمام محمد بن الحسن الشيباني",
            "الإمام الطحاوي",
            "الإمام السرخسي",
            "الإمام ابن عابدين"
        ]
    
    def get_introduction(self) -> str:
        """مقدمة عن المذهب الحنفي"""
        return f"""أنا المذهب {self.arabic_name}، أقدم المذاهب الفقهية الأربعة المعتبرة في الإسلام.
        
        تأسست على يد الإمام العظيم {self.founder} في {self.founding_period}.
        
        أتميز بمنهجي المرن في الاستنباط، حيث أعتمد على الرأي والقياس والاستحسان بشكل واسع،
        مما يجعلني قادراً على مواكبة المستجدات والنوازل الفقهية.
        
        أنتشر بشكل واسع في {', '.join(self.geographic_influence[:3])} وغيرها من البلدان،
        ويتبعني أكثر من ثلث المسلمين في العالم."""
    
    def get_methodology(self) -> str:
        """منهجية المذهب الحنفي"""
        return """منهجيتي في الاستنباط تقوم على:
        
        1. القرآن الكريم - المصدر الأول
        2. السنة النبوية - مع التدقيق في صحة الأحاديث
        3. الإجماع - إجماع الصحابة والتابعين
        4. القياس - مع التوسع فيه
        5. الاستحسان - ترك القياس لدليل أقوى
        6. العرف - اعتبار العادات والأعراف المحلية
        
        أشتهر بمرونتي في التعامل مع المسائل الفقهية والنظر إلى مقاصد الشريعة."""
    
    def get_famous_scholars(self) -> str:
        """علماء المذهب الحنفي المشهورون"""
        return f"""من أبرز علمائي:
        
        • {self.famous_scholars[0]} - مؤسس المذهب وإمام أهل الرأي
        • {self.famous_scholars[1]} - تلميذ أبي حنيفة وأول قاض للقضاة
        • {self.famous_scholars[2]} - صاحب المؤلفات الأساسية في المذهب
        • {self.famous_scholars[3]} - صاحب العقيدة الطحاوية المشهورة
        • {self.famous_scholars[4]} - صاحب المبسوط في الفقه الحنفي
        • {self.famous_scholars[5]} - صاحب رد المحتار على الدر المختار"""
    
    def build_prompt(self, question: str) -> str:
        """بناء التوجيه المخصص للمذهب الحنفي"""
        base_prompt = super().build_prompt(question)
        
        hanafi_additions = f"""
        
        معلومات إضافية عن المذهب الحنفي:
        - أشتهر بالمرونة في التطبيق والاعتماد على العقل والقياس
        - أعطي أهمية كبيرة للاستحسان والعرف في الأحكام
        - أتبع منهجاً متوازناً بين النصوص والواقع المعاصر
        - من أكثر المذاهب انتشاراً في العالم الإسلامي
        
        تأكد من إبراز هذه الخصائص في إجابتك وكيف تؤثر على الحكم الفقهي."""
        
        return base_prompt + hanafi_additions