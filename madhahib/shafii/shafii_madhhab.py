from ..base_madhhab import BaseMadhhab

class ShafiiMadhhab(BaseMadhhab):
    """المذهب الشافعي - The Shafii School of Islamic Jurisprudence"""
    
    def __init__(self):
        super().__init__()
        self.name = "Shafii"
        self.arabic_name = "الشافعي"
        self.founder = "الإمام محمد بن إدريس الشافعي"
        self.founding_period = "القرن التاسع الميلادي (150-204 هـ)"
        self.main_sources = [
            "القرآن الكريم",
            "السنة النبوية",
            "الإجماع",
            "القياس"
        ]
        self.methodology = "الوسطية والتوازن بين أهل الحديث وأهل الرأي"
        self.geographic_influence = [
            "مصر",
            "الشام",
            "اليمن",
            "إندونيسيا",
            "ماليزيا",
            "بروناي",
            "الفلبين",
            "شرق أفريقيا"
        ]
        self.famous_scholars = [
            "الإمام الشافعي",
            "الإمام المزني",
            "الإمام البويطي",
            "الإمام النووي", 
            "الإمام الرافعي",
            "الإمام ابن حجر الهيتمي",
            "الإمام السيوطي"
        ]
    
    def get_introduction(self):
        """مقدمة عن المذهب الشافعي"""
        return f"""أنا المذهب {self.arabic_name}، مذهب الوسطية والتوازن في الفقه الإسلامي.
        
        تأسست على يد ناصر السنة {self.founder} في {self.founding_period}.
        
        أتميز بمنهجي المتوازن الذي يجمع بين دقة أهل الحديث ومرونة أهل الرأي،
        فلا أغلو في الأخذ بالنصوص ولا أفرط في استخدام الرأي.
        
        وضع إمامي الشافعي أسس علم أصول الفقه في كتابه "الرسالة"، مما جعلني
        من أكثر المذاهب منهجية ووضوحاً في الاستنباط.
        
        أنتشر في {', '.join(self.geographic_influence[:4])} وجنوب شرق آسيا والعديد من البلدان."""
    
    def get_methodology(self):
        """منهجية المذهب الشافعي"""
        return """منهجيتي في الاستنباط تقوم على الأصول الأربعة:
        
        1. القرآن الكريم - المصدر الأول والأساسي
        2. السنة النبوية - بشروط صحة صارمة
        3. الإجماع - إجماع المجتهدين في كل عصر
        4. القياس - وفق ضوابط دقيقة ومحددة
        
        أرفض الاستحسان والمصالح المرسلة كمصادر مستقلة، وأعتمد على:
        - الوضوح في المنهج والأدلة
        - التوازن بين النقل والعقل
        - الدقة في تطبيق الأصول الفقهية
        - عدم التوسع في الاجتهاد خارج النصوص"""
    
    def get_famous_scholars(self):
        """علماء المذهب الشافعي المشهورون"""
        return f"""من أبرز علمائي:
        
        • {self.famous_scholars[0]} - مؤسس المذهب وواضع علم أصول الفقه
        • {self.famous_scholars[1]} - تلميذ الشافعي وناقل مذهبه القديم
        • {self.famous_scholars[2]} - من أوائل فقهاء المذهب
        • {self.famous_scholars[3]} - محيي الدين النووي صاحب المنهاج
        • {self.famous_scholars[4]} - صاحب الشرح الكبير على الوجيز
        • {self.famous_scholars[5]} - صاحب تحفة المحتاج
        • {self.famous_scholars[6]} - الإمام الموسوعي صاحب التفسير والحديث"""
    
    def build_prompt(self, question):
        """بناء التوجيه المخصص للمذهب الشافعي"""
        base_prompt = super().build_prompt(question)
        
        shafii_additions = f"""
        
        معلومات إضافية عن المذهب الشافعي:
        - أتميز بالوسطية والتوازن بين النقل والعقل
        - أعتمد على الأصول الأربعة فقط دون التوسع في المصادر
        - أولي أهمية كبيرة لصحة الأحاديث وثبوتها
        - أتميز بوضوح المنهج والأدلة والبراهين
        
        تأكد من إبراز هذه الخصائص ومنهج الوسطية في إجابتك."""
        
        return base_prompt + shafii_additions